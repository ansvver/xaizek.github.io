<!DOCTYPE HTML>

<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="author" content="xaizek" />
    <title>Configuring keys in less</title>
    <link rel="stylesheet" type="text/css" href="/css/style.css" />
    
    <link rel="stylesheet" type="text/css" href="/css/syntax.css" />
    
  </head>
  <body>
    <header>
      <h4>
        <a style="color: black; text-decoration: none;" href="/">
          Short notes on computer stuff
        </a>
      </h4>
      <h1>Configuring keys in less</h1>
      <h5 class="post_date">October 11, 2012</h5>
      <div class="tag_list">
        
        [<a href="/tag/less">less</a>]
        
        [<a href="/tag/console">console</a>]
        
        [<a href="/tag/terminal">terminal</a>]
        
        [<a href="/tag/keys">keys</a>]
        
        [<a href="/tag/shortcuts">shortcuts</a>]
        
        [<a href="/tag/mappings">mappings</a>]
        
        [<a href="/tag/bindings">bindings</a>]
        
      </div>
    </header>
    <section>
      <div class="content">
  <div id="post">
    <p>Since I&#39;m using Vim and terminal constantly the only right way of going through
command-line history in my world is using <code>Control-P</code> (<code>&lt;c-p&gt;</code> or <code>^P</code>; to go
backwards) and <code>Control-N</code> (<code>&lt;c-n&gt;</code> or <code>^N</code> to go forwards).</p>

<p>And I missed this key bindings while using less to view man pages or long output
of commands (e.g. <code>git log</code>).  As always the first thing to do in such case
should be reading of man page of a tool.  Here is what I&#39;ve found there:</p>

<ol>
<li>Less has support of key bindings configuration file of binary format
(<code>~/.less</code> by default)</li>
<li>There is a special tool called <code>lesskey</code>, which generates <code>~/.less</code> binary
file from a text file (<code>~/.lesskey</code> by default)</li>
</ol>

<p>If you want to know more about this stuff, just read <code>man less</code> and
<code>man lesskey</code>.  Below is an example of adding support of several shortcuts for
less.</p>

<p>First of all one needs to create a file named <code>~/.lesskey</code> (read <code>man lesskey</code>
if you want to name it in another way) and put these lines in it:</p>
<div class="highlight"><pre><code class="text">#line-edit
\e abort
^P up
^N down
</code></pre>
</div>

<p>You should already know that less has some kind of modality and thus it has
several modes.  No surprise that one needs to specify target mode for key
bingings, which is <code>#line-edit</code> in the example above.  There should be no spaces
after sharp symbol.  Bellow that line tree more lines follow.  The first one
makes less leave line-edit mode if user presses <code>Escape</code> key (<code>&lt;esc&gt;</code>).  The
second one makes <code>Control-P</code> work as <code>Arrow Up</code> works by default, while the
third line binds <code>Control-N</code> to <code>Arrow Down</code> action.</p>

<p>Here is where we need to use <code>lesskey</code> tool.  Just run it and it will generate a
<code>~/.less</code> file of binary format from the contents of <code>~/.lesskey</code>.  Now try
running less for something, type <code>/</code> (forward slash) to enter line-edit mode and
press <code>Control-N</code> and <code>Control-P</code> to check if it works, well it should work now.</p>

  </div>
</div>

    </section>
  </body>
</html>
